# S3(Simple Storage Service)

`REST API`를 이용하는 `객체 스토리지 서비스`입니다. 원하는 양 만큼의 데이터를 저장하고 보호할 수 있습니다.

## S3의 용도

대용량의 파일/데이터를 EC2와 EBS에 저장하면 많은 비용과 노동이 발생하지만, S3에 저장하게 되면 용량의 제한이 없고, 비용이 저렴합니다.   
또한, `정적/동적` 웹 페이지가 있다고 할 때, `정적 웹 페이지`는 EC2와 EBS를 구성할 필요 없이 `S3 정적 웹 호스팅 서비스`를 이용하면 성능도 높일 수 있고 비용도 절감할 수 있습니다.

파일의 업로드/다운로드를 `HTTP 프로토콜`로 처리합니다(REST API).

## S3의 용어

* `객체(Object)` : S3에 저장되는 `데이터의 최소 단위`. 객체는 `파일과 메타데이터`로 구성됩니다. 
  - 객체 속 데이터는 `키-값` 형식입니다.
  - 객체 하나의 크기 : 1Byte ~ 5TB
* `버킷(bucket)` : S3에서 생성할 수 있는 `최상위 디렉토리`입니다. 객체는 버킷 안에 저장됩니다.
  - 리전별로 생성이 가능하고, 버킷 이름은 `모든 리전 중 유일`해야 합니다.
  - 저장 가능한 객체의 개수와 용량은 `무제한`입니다.
  - `접속 제어` 및 `권한 관리`가 가능합니다.
  - `http://examplebucket.s3.amazonaws.com/helloworld.jpg` 처럼 URL로 접근이 가능합니다. 여기서 examplebucket은 버킷, helloworld.jpg은 객체

## 스토리지 클래스

S3는 요금을 부과할 때 스토리지 요금, 요청 및 데이터 검색 요금, 데이터 전송 및 전송 가속화 요금, 데이터 관리 및 분석 요금, 
S3 객체 Lambda에서 데이터 처리 요금의 여섯 가지 비용 요소를 고려합니다.

또한 스토리지 클래스에 따라 요금이 부과되는 방식이 다릅니다.   

`Standard` : `자주 액세스하는 데이터`의 범용 스토리지   
`Intelligent-Tiering` : `알 수 없거나 변화하는 액세스 패턴`이 있는 데이터 스토리지   
`Standard-Infrequent Access(S3 Standard-IA)` 및 `S3 One Zone-Infrequent Access(S3 One Zone-IA)` : 수명이 길지만 자주 액세스하지 않는 데이터 스토리지   
`Glacier(S3 Glacier)` 및 `Glacier Deep Archive(S3 Glacier Deep Archive)` : 장기 아카이브 및 디지털 보존을 위한 스토리지   

## S3 버킷 생성

1. `S3` 콘솔로 접속해서 [버킷] > [버킷 만들기]   
![image](https://user-images.githubusercontent.com/43658658/145761649-d429c324-72b4-4286-859b-d785ff9fd41f.png)

2. 버킷을 설정하고 [버킷 만들기]   
![image](https://user-images.githubusercontent.com/43658658/145763318-292522b3-4b07-4bc7-8f1e-d4acdb6c6350.png)   
![image](https://user-images.githubusercontent.com/43658658/145763295-5d60176d-3bda-4243-ad57-5a1d1e3d092f.png)   
![image](https://user-images.githubusercontent.com/43658658/145763901-9050e46c-6d05-4fa4-a1dd-c20dedc95986.png)   
버전 관리를 사용하여 한 버킷에 `여러 버전의 객체를 보관`하고, 실수로 삭제되거나 덮어쓰기된 객체를 복원할 수 있습니다. 객체를 영구적으로 제거하지 않고 삭제하는 경우, Amazon S3에서는 `삭제 마커를 삽입`하며 이 삭제 마커가 현재 객체 버전이 됩니다. 따라서 `나중에 이전 버전을 복원`할 수 있습니다.   
![image](https://user-images.githubusercontent.com/43658658/145763777-cd1dd790-d434-4509-b270-b2c4b0585403.png)

3. 버킷이 생성되었습니다.   
![image](https://user-images.githubusercontent.com/43658658/145764162-94df8c1b-20a2-4a0c-8027-799ca4b2e7c2.png)

## S3 버킷에 파일 업로드/다운로드

> <h3>파일 업로드</h3>

1. 방금 생성한 버킷으로 들어가서 `[업로드]`   
![image](https://user-images.githubusercontent.com/43658658/145764334-c4109dc0-c93f-4d6c-8166-8150313b976b.png)

2. 적절한 파일을 선택합니다.   
![image](https://user-images.githubusercontent.com/43658658/145764376-27ee544d-8c3e-4953-9636-1996a42edafb.png)

3. 아래쪽에 속성에서 스토리지 클래스와 암호화 설정을 지정합니다.   
![image](https://user-images.githubusercontent.com/43658658/145764677-87fa59b9-c134-4d1a-a443-fd853bf241e3.png)   
![image](https://user-images.githubusercontent.com/43658658/145765037-80d3fb89-a473-43a8-89dd-a9ae8270b2a1.png)

4. [업로드] 버튼을 누르면, 버킷에 파일(객체)이 업로드 된 것을 확인할 수 있습니다.   
![image](https://user-images.githubusercontent.com/43658658/145765212-65990731-e506-4060-beab-12d161c5daa7.png)   

> <h3>파일 다운로드</h3>

객체를 체크하고 [다운로드]를 클릭합니다.   
![image](https://user-images.githubusercontent.com/43658658/145765334-a0e89d59-0297-48b6-9cfd-5d6060dadfb3.png)

## S3 세부 설정

> <h3>객체 접근 권한 설정</h3>

이전에 업로드 한 파일로 들어가보면 `객체 URL`이 있습니다.   
![image](https://user-images.githubusercontent.com/43658658/145766287-72c9f629-2629-4292-9cf5-cf849142f1d6.png)

하지만 이 URL은 열리지 않습니다.   
![image](https://user-images.githubusercontent.com/43658658/145766350-6f4e1bc6-0bf3-4348-93c0-07b667cfac60.png)

접근 권한을 설정해서 파일이 열리도록 해보겠습니다.   

1. [권한] > [퍼블릭 액세스 차단] > [편집]   
![image](https://user-images.githubusercontent.com/43658658/145768410-355c7284-1ace-4716-8c9a-c8c6c4d3bbc0.png)

여기서 `임의의`는 `모든`의 의미와 같습니다.   
![image](https://user-images.githubusercontent.com/43658658/145768916-17d140f2-5d42-4626-b0b1-39b801e7cd9e.png)   

2. [변경 사항 저장]을 누릅니다.   
![image](https://user-images.githubusercontent.com/43658658/145769048-84d3198e-0bbd-4b4d-8127-dd982978aa8a.png)

3. 다음으로 [객체 소유권] > [편집]   
![image](https://user-images.githubusercontent.com/43658658/145769597-9c025f6b-e7df-4e59-8a40-10632ebad09b.png)

4. `ACL을 활성화`합니다.   
![image](https://user-images.githubusercontent.com/43658658/145769706-dec87b5b-b72b-47ed-8516-7a01adf48c61.png)

5. 이제 원하는 객체를 선택하고 [작업] > [ACL을 통해 퍼블릭으로 설정]   
![image](https://user-images.githubusercontent.com/43658658/145769980-e337f574-b8ad-4c55-b79f-9d663c35c220.png)   
![image](https://user-images.githubusercontent.com/43658658/145770146-b04254aa-f268-400a-834d-af45e8355c56.png)

6. 이제 다시 객체의 URL로 접속하면 사진이 정상적으로 나타납니다.   
![image](https://user-images.githubusercontent.com/43658658/145770265-419e78ec-192e-43ab-a552-5cb8d4c84d3b.png)












